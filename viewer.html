<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset = "UTF-8">
  <title>Daniel Lawson</title>
  <meta name = "description" content = "Daniel Lawson's portfolio">
  <meta name = "author" content = "Daniel Lawson">

   <!-- style -->
 <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>  
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" type = "text/javascript"></script>
  <style>
    body{
      background-color: Gray;
      font-family: "Lucida Console", Monaco, monospace;
    }
    .entry{
        min-height: 100px;
        width: 60%;
        margin: 0 auto;
        margin-bottom: 20px;
    }
    .entry:hover{
      cursor:pointer;
      background-color: gray!important;
      background-blend-mode: multiply!important;
    }
  </style>
</head>


<body>
  <h1 class = "text-center" style = "margin:100px;margin-bottom:0px;">Random Wikipedia Articles</h1>
  <p class = "text-center" style ="margin-bottom:100px;">Made by <a href ="https://codepen.io/Daniel_Lawson9999/full/dVOeBr/" target = "_blank">Daniel Lawson</a></p>
  <div class = "main">
    <div class = "w3-center">
    <div class = "w3-bar">
      <button class = "w3-bar-item w3-button w3-block w3-gray" id ="random">Random Article</button>
      <input type = "text" class ="w3-bar-item w3-input" value = "" placeholder = "search anything" id ="search-enter"></input>
      <button class = "w3-bar-item w3-button w3-block w3-black" id ="search"><i class="fa fa-search" aria-hidden="true"></i></button>
      <button class = "w3-bar-item w3-button w3-block w3-red" id = "clear">x</button>
    </div>
    </div>
    <div class = "w3-center" id = "results">
    </div>
  </div>
  <script type = "text/javascript">
      $(document).ready(function(){
      $("#clear").hide();
      $("#random").click(function(){
        window.open("https://en.wikipedia.org/wiki/Special:Random", "_blank");
      });                                       
      $("#search-enter").keydown(function(){ 
        if(event.which == 13){
          list($("#search-enter").val());
        }
      });
      $("#search").click(function(){
        list($("#search-enter").val());
      });
      $("#clear").click(function(){
        $("#results").empty();
        $(this).fadeOut("slow");
      });
    });

    function list(search){
      var url ="https://cors-anywhere.herokuapp.com/https://en.wikipedia.org/w/api.php?action=opensearch&search=" + search   +  "&format=json";
      $.getJSON(url,function(json){
        $("#results").empty();
        let count = 0;
        for(let entry in json[1]){
          makeEntry(json[1][count],json[2][count],json[3][count]);
          count++;
        }
      });
    }
    function makeEntry(title,description,link){
      //console.log("title: " + title + " description: " +description + " link: " + link + "\n");
      $("#clear").fadeIn("slow");
      let entry = $("<div></div>").addClass("w3-panel w3-leftbar w3-sand entry");
      let name = $("<p></p>").text(title);
      let info = $("<p></p>").text(description);
      console.log("test");
      entry.append(name);
      entry.append(info);
      entry.click(function(){
        window.open(link, "_blank");
      });
      $("#results").append(entry);
      entry.hide();
      entry.slideDown("slow");
    }
  </script>
</body>